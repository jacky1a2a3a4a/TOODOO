import"./main-B6Q3Bb71.js";const m=document.querySelector(".login"),g=document.querySelector("#login-form"),h=document.querySelector(".register"),p=document.querySelector("#register-form");document.querySelector(".buttons");document.querySelector("#login-btn");const y=document.querySelector("#switch-to-register-btn");document.querySelector("#register-btn");const S=document.querySelector("#switch-to-login-btn"),a=document.querySelector("#password-length-error"),l=document.querySelector("#password-match-error"),d=document.querySelector("#login-error"),w=document.querySelector("#register-repeat-error"),s=document.querySelector(".login-img img"),u="https://todoo.5xcamp.us";function i(o){m.classList.toggle("active"),h.classList.toggle("active")}function q(o,n,e){axios.post(`${u}/users`,{user:{email:o,nickname:n,password:e}}).then(t=>{setTimeout(()=>{localStorage.setItem("nickname",n),s.style.animation="elastic-bounce 0.6s ease-out",s.addEventListener("animationend",r=>{alert("register successful! Now will switch to login page."),i()})},0),console.log(t)}).catch(t=>{t.response.data.message==="註冊發生錯誤"&&w.classList.remove("hidden"),console.log(t)})}function v(o,n){axios.post(`${u}/users/sign_in`,{user:{email:o,password:n}}).then(e=>{s.style.animation="none",d.classList.add("hidden");const t=e.headers.authorization,r=e.data.nickname;axios.defaults.headers.common.Authorization=t,localStorage.setItem("Authorization",t),localStorage.setItem("nickname",r),setTimeout(()=>{s.style.animation="elastic-bounce 0.6s ease-out",s.addEventListener("animationend",c=>{window.location.href="/pages/ToDoList/to_do_list.html"})},0),console.log(e)}).catch(e=>{d.classList.remove("hidden"),console.log(e)})}y.addEventListener("click",o=>{i()});S.addEventListener("click",o=>{i()});p.addEventListener("submit",o=>{o.preventDefault();const n=document.querySelector("#register-email-content").value,e=document.querySelector("#register-nickname-content").value,t=document.querySelector("#register-password-content").value,r=document.querySelector("#register-password2-content").value;let c=!1;t.length<6?(a.classList.remove("hidden"),c=!0):a.classList.add("hidden"),t!==r?(l.classList.remove("hidden"),c=!0):l.classList.add("hidden"),!c&&q(n,e,t)});g.addEventListener("submit",o=>{o.preventDefault();const n=document.querySelector("#login-email-content").value,e=document.querySelector("#login-password-content").value;v(n,e)});
